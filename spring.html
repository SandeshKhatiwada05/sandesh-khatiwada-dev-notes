<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spring Boot - Sandesh Khatiwada</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Poppins:wght@600;700;800&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style-new.css">
</head>
<body>
    <!-- NAVBAR - MINIMAL HEADER -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-brand">Sandesh</a>
            <div class="nav-controls">
                <button id="theme-toggle-btn" class="nav-icon-btn" aria-label="Toggle theme">
                    <span class="theme-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                    </span>
                </button>
                <a href="games.html" class="nav-icon-btn" aria-label="Games">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="6" y1="9" x2="6" y2="22"></line>
                        <line x1="18" y1="9" x2="18" y2="22"></line>
                        <path d="M6 9h12V7c0-1 .895-2 2-2h1c1.105 0 2 .895 2 2v2h1c1.105 0 2 .895 2 2v10c0 1.105-.895 2-2 2h-1v-2h-1v2h-12v-2h-1v2H4c-1.105 0-2-.895-2-2V11c0-1.105.895-2 2-2h1V7c0-1 .895-2 2-2h1c1.105 0 2 .895 2 2v2z"></path>
                    </svg>
                </a>
                <a href="https://github.com/SandeshKhatiwada05" target="_blank" class="nav-icon-btn github-icon" aria-label="GitHub">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v 3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
                <div class="hamburger-menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>
    </nav>

    <!-- SIDEBAR MENU -->
    <aside class="sidebar">
        <ul class="sidebar-menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="spring.html">Spring Boot</a></li>
            <li><a href="n8n.html">n8n</a></li>
            <li><a href="games.html">Games</a></li>
            <li><a href="#" data-action="open-cv">CV</a></li>
        </ul>
    </aside>

    <!-- SIDEBAR OVERLAY -->
    <div class="sidebar-overlay"></div>

    <!-- CV MODAL - FULL SCREEN -->
    <div id="cv-modal" class="cv-modal">
        <div class="cv-modal-header">
            <h2>My Resume</h2>
            <div class="cv-search-bar">
                <input 
                    type="text" 
                    id="cv-search-input" 
                    class="cv-search-input" 
                    placeholder="Search CV..."
                    aria-label="Search CV content"
                >
            </div>
            <button class="cv-close-btn" aria-label="Close CV modal">✕</button>
        </div>
        <div class="cv-modal-body">
            <iframe src="Sandesh_CV.pdf" title="My CV"></iframe>
        </div>
    </div>

    <!-- Main Content -->
    <main class="container">
        <!-- Header Section -->
        <section class="header">
            <h1>Spring Boot</h1>
            <p class="header-subtitle">Enterprise Java Development with Spring Framework</p>
        </section>

        <!-- Cheat Sheet Section -->
        <section class="content-section">
            <h2 class="section-title">Cheat Sheet</h2>
            <div class="cards-grid">
                <div class="card">
                    <h3>Project Setup</h3>
                    <pre><code>@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
}</code></pre>
                    <p>Entry point for any Spring Boot application. Auto-configuration handles most setup.</p>
                </div>
                <div class="card">
                    <h3>Common Annotations</h3>
                    <ul class="compact-list">
                        <li><code>@RestController</code> - REST endpoint class</li>
                        <li><code>@Service</code> - Business logic layer</li>
                        <li><code>@Repository</code> - Data access layer</li>
                        <li><code>@Autowired</code> - Dependency injection</li>
                        <li><code>@Configuration</code> - Configuration class</li>
                        <li><code>@Bean</code> - Define bean programmatically</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>application.yml Structure</h3>
                    <pre><code>spring:
  datasource:
    url: jdbc:mysql://localhost:3306/db
    username: root
    password: pass
  jpa:
    hibernate:
      ddl-auto: update</code></pre>
                </div>
            </div>
        </section>

        <!-- Core Concepts Section -->
        <section class="content-section">
            <h2 class="section-title">Core Concepts</h2>
            <div class="cards-grid">
                <div class="card">
                    <h3>Dependency Injection</h3>
                    <p>
                        Spring's IoC container manages object creation and lifecycle. Use constructor injection 
                        for immutability and testability. Avoid field injection in production code.
                    </p>
                    <pre><code>@Service
public class UserService {
    private final UserRepository repo;
    
    public UserService(UserRepository repo) {
        this.repo = repo;
    }
}</code></pre>
                </div>
                <div class="card">
                    <h3>Request-Response Cycle</h3>
                    <p>
                        Request flows through: Dispatcher Servlet → Interceptors → Controller → Service 
                        → Repository → Database. Response returns through same stack with formatters applied.
                    </p>
                </div>
                <div class="card">
                    <h3>Layered Architecture</h3>
                    <ul class="compact-list">
                        <li><strong>Controller:</strong> HTTP request handling</li>
                        <li><strong>Service:</strong> Business logic & orchestration</li>
                        <li><strong>Repository:</strong> Data access abstraction</li>
                        <li><strong>Entity:</strong> Domain model / database mapping</li>
                        <li><strong>DTO:</strong> Data transfer objects for API</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Application Properties</h3>
                    <p>
                        Externalize configuration using <code>application.properties</code> or <code>application.yml</code>. 
                        Access via <code>@Value</code> or <code>@ConfigurationProperties</code>. 
                        Supports profiles: application-dev.yml, application-prod.yml.
                    </p>
                </div>
            </div>
        </section>

        <!-- Spring Security Section -->
        <section class="content-section">
            <h2 class="section-title">Spring Security</h2>
            <div class="cards-grid">
                <div class="card">
                    <h3>Security Configuration</h3>
                    <pre><code>@Configuration
@EnableWebSecurity
public class SecurityConfig {
    @Bean
    public SecurityFilterChain filterChain(
            HttpSecurity http) throws Exception {
        http.authorizeRequests()
            .antMatchers("/public/**").permitAll()
            .anyRequest().authenticated()
            .and()
            .formLogin();
        return http.build();
    }
}</code></pre>
                </div>
                <div class="card">
                    <h3>Key Concepts</h3>
                    <ul class="compact-list">
                        <li><strong>Authentication:</strong> Who are you? (verify identity)</li>
                        <li><strong>Authorization:</strong> What can you do? (check permissions)</li>
                        <li><strong>Principal:</strong> Currently authenticated user</li>
                        <li><strong>GrantedAuthority:</strong> Permission/role held by user</li>
                        <li><strong>SecurityContext:</strong> Holds auth info for current thread</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>Password Encoding</h3>
                    <p>
                        Always use <code>PasswordEncoder</code>. BCrypt recommended for new projects. 
                        Never store plain passwords.
                    </p>
                    <pre><code>@Bean
public PasswordEncoder passwordEncoder() {
    return new BCryptPasswordEncoder();
}</code></pre>
                </div>
                <div class="card">
                    <h3>Common Patterns</h3>
                    <ul class="compact-list">
                        <li>CSRF protection for form submissions</li>
                        <li>CORS configuration for API access</li>
                        <li>Role-based access control (RBAC)</li>
                        <li>Method-level security with <code>@PreAuthorize</code></li>
                        <li>HTTPS enforcement in production</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- OAuth2 and JWT Section -->
        <section class="content-section">
            <h2 class="section-title">OAuth2 & JWT</h2>
            <div class="cards-grid">
                <div class="card">
                    <h3>JWT Token Structure</h3>
                    <p>
                        JWT contains three parts separated by dots: <code>header.payload.signature</code>
                    </p>
                    <ul class="compact-list">
                        <li><strong>Header:</strong> Token type and hashing algorithm</li>
                        <li><strong>Payload:</strong> Claims (user info, permissions, exp time)</li>
                        <li><strong>Signature:</strong> HMAC or RSA signature for verification</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>OAuth2 Flow (Authorization Code)</h3>
                    <p>
                        User → App redirects to Auth Server → User grants permission → 
                        Auth Server returns code → App exchanges code for token → Token used for API calls
                    </p>
                </div>
                <div class="card">
                    <h3>Spring Security OAuth2 Setup</h3>
                    <pre><code>@Bean
public SecurityFilterChain filterChain(
        HttpSecurity http) throws Exception {
    http.oauth2Login()
        .userInfoEndpoint()
        .userService(userService);
    return http.build();
}</code></pre>
                </div>
                <div class="card">
                    <h3>Token Validation</h3>
                    <ul class="compact-list">
                        <li>Verify signature with public key</li>
                        <li>Check expiration time (exp claim)</li>
                        <li>Validate issuer (iss claim)</li>
                        <li>Validate audience (aud claim)</li>
                        <li>Store in secure, httpOnly cookies (not localStorage)</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- JPA & Hibernate Section -->
        <section class="content-section">
            <h2 class="section-title">JPA / Hibernate</h2>
            <div class="cards-grid">
                <div class="card">
                    <h3>Entity Basics</h3>
                    <pre><code>@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = 
        GenerationType.IDENTITY)
    private Long id;
    
    @Column(nullable = false, unique = true)
    private String email;
}</code></pre>
                </div>
                <div class="card">
                    <h3>Relationships</h3>
                    <ul class="compact-list">
                        <li><code>@OneToMany</code> - One entity to many related</li>
                        <li><code>@ManyToOne</code> - Many entities to one</li>
                        <li><code>@ManyToMany</code> - Many to many with join table</li>
                        <li><code>@OneToOne</code> - One-to-one mapping</li>
                        <li>Use <code>mappedBy</code> for bidirectional relations</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>JPA Repository</h3>
                    <pre><code>public interface UserRepository
    extends JpaRepository&lt;User, Long&gt; {
    
    List&lt;User&gt; findByEmail(String email);
    
    @Query("SELECT u FROM User u WHERE " +
           "u.status = :status")
    List&lt;User&gt; findActive(
        @Param("status") String status);
}</code></pre>
                </div>
                <div class="card">
                    <h3>JPA Buddy</h3>
                    <p>
                        IntelliJ plugin for JPA/Hibernate productivity. Auto-generates entity classes, 
                        visualizes relationships, provides inspections for common issues, and simplifies 
                        DDL migrations.
                    </p>
                </div>
                <div class="card">
                    <h3>N+1 Query Problem</h3>
                    <p>
                        Occurs when fetching parent entities triggers individual queries for each child. 
                        Solution: Use <code>@Fetch(FetchMode.JOIN)</code>, eager loading, or 
                        <code>@Query</code> with JOIN FETCH.
                    </p>
                </div>
                <div class="card">
                    <h3>Best Practices</h3>
                    <ul class="compact-list">
                        <li>Use DTOs for API responses, not entities</li>
                        <li>Lazy load by default, eager load explicitly</li>
                        <li>Index frequently queried columns</li>
                        <li>Use transactions for data consistency</li>
                        <li>Consider soft deletes with @Where annotation</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Swagger & OpenAPI Section -->
        <section class="content-section">
            <h2 class="section-title">Swagger / OpenAPI</h2>
            <div class="cards-grid">
                <div class="card">
                    <h3>Springdoc Setup</h3>
                    <pre><code>// pom.xml
&lt;dependency&gt;
    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;
    &lt;artifactId&gt;
        springdoc-openapi-starter-
        webmvc-ui
    &lt;/artifactId&gt;
    &lt;version&gt;2.0.0&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
                </div>
                <div class="card">
                    <h3>Documenting Endpoints</h3>
                    <pre><code>@GetMapping("/users/{id}")
@Operation(
    summary = "Get user by ID",
    description = "Retrieve user details")
@ApiResponse(
    responseCode = "200",
    description = "User found")
public UserDTO getUserById(
    @PathVariable Long id) {
    // implementation
}</code></pre>
                </div>
                <div class="card">
                    <h3>OpenAPI Configuration</h3>
                    <pre><code>@Configuration
public class OpenApiConfig {
    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
            .info(new Info()
                .title("My API")
                .version("1.0.0"));
    }
}</code></pre>
                </div>
                <div class="card">
                    <h3>Benefits</h3>
                    <ul class="compact-list">
                        <li>Auto-generates interactive API docs</li>
                        <li>Live test endpoints from UI</li>
                        <li>Generates client SDKs</li>
                        <li>Documents request/response schemas</li>
                        <li>Standard format for API contracts</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2024 Sandesh Khatiwada. All rights reserved. | 
            <a href="https://github.com/SandeshKhatiwada05" target="_blank">GitHub</a>
        </p>
    </footer>

    <!-- Scripts -->
    <script src="js/main-new.js"></script>
</body>
</html>
